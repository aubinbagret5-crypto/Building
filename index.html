<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Manager Invest - Plateforme semi-réelle</title>
<style>
body { font-family: Arial, sans-serif; margin:0; background:#f5f5f5; }
header { background:#4CAF50; color:white; padding:15px; text-align:center; }
nav { background:#333; overflow:hidden; }
nav a { float:left; display:block; color:white; text-align:center; padding:12px 16px; text-decoration:none; }
nav a:hover { background:#ddd; color:black; }
section { padding:20px; }
.plan-card, .investment-card { background:#fff; padding:15px; margin:10px 0; border-radius:10px; box-shadow:0 0 5px rgba(0,0,0,0.1); }
button { padding:8px 12px; border:none; border-radius:5px; background:#4CAF50; color:white; cursor:pointer; }
button:hover { background:#45a049; }
form { background:#fff; padding:20px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1); max-width:500px; margin:auto; }
input, select { width:100%; padding:8px; margin:5px 0 15px 0; border-radius:5px; border:1px solid #ccc; }
.result { background:#e9f7ef; padding:10px; border-radius:5px; margin-top:10px; }
table { width:100%; border-collapse: collapse; margin-top:15px; }
th, td { border:1px solid #ccc; padding:8px; text-align:center; }
th { background:#eee; }
</style>
</head>
<body>

<header>
  <h1>Manager Invest</h1>
  <p>Investissez et suivez vos gains facilement !</p>
</header>

<nav>
  <a href="#home" onclick="showPage('home')">Accueil</a>
  <a href="#plans" onclick="showPage('plans')">Plans</a>
  <a href="#deposit" onclick="showPage('deposit')">Dépôt</a>
  <a href="#withdraw" onclick="showPage('withdraw')">Retrait</a>
  <a href="#history" onclick="showPage('history')">Historique</a>
  <a href="#dashboard" onclick="showPage('dashboard')">Tableau de bord</a>
  <a href="#" id="logoutBtn" onclick="logout()">Se déconnecter</a>
</nav>

<!-- Accueil -->
<section id="home">
  <h2>Bienvenue sur Manager Invest</h2>
  <p>Manager Invest vous permet de faire croître vos économies grâce à nos plans d’investissement adaptés à tous les budgets. Choisissez un plan, investissez et suivez vos gains en toute simplicité.</p>
  <p>Pour commencer, <strong>inscrivez-vous ou connectez-vous</strong> pour accéder à tous les plans et fonctionnalités.</p>
  <button onclick="showPage('signup')">Créer un compte</button>
  <button onclick="showPage('login')">Se connecter</button>
</section>

<!-- Connexion -->
<section id="login" style="display:none;">
  <h2>Connexion</h2>
  <p>Entrez votre email et mot de passe pour accéder à votre compte.</p>
  <form id="loginForm">
    <label>Email*</label><input type="email" id="loginEmail" required>
    <label>Mot de passe*</label><input type="password" id="loginPassword" required>
    <button type="submit">Se connecter</button>
  </form>
  <p>Pas encore inscrit ? <a href="#" onclick="showPage('signup')">Créer un compte</a></p>
</section>

<!-- Inscription -->
<section id="signup" style="display:none;">
  <h2>Créer un compte et investir</h2>
  <p>Remplissez vos informations et choisissez un plan pour commencer votre investissement.</p>
  <form id="investmentForm">
    <label>Prénom*</label><input type="text" id="firstName" required>
    <label>Nom*</label><input type="text" id="lastName" required>
    <label>Email*</label><input type="email" id="email" required>
    <label>Mot de passe*</label><input type="password" id="password" required>
    <label>Choisir un plan*</label>
    <select id="investmentPlanForm" required>
      <option value="">Sélectionnez un plan...</option>
    </select>
    <div class="result">
      <p>Gains quotidien: <span id="dailyGain">0</span> FCFA</p>
      <p>Gains total: <span id="totalGain">0</span> FCFA</p>
      <p>Retrait minimal net: 1 000 FCFA</p>
      <p>Impôt sur retrait: 5%</p>
    </div>
    <button type="submit">Créer mon compte et investir</button>
  </form>
</section>

<!-- Plans -->
<section id="plans" style="display:none;">
  <h2>Nos Plans d’Investissement</h2>
  <p>Choisissez le plan qui correspond à votre budget et à votre objectif. Cliquez sur "Investir" pour ajouter le plan à votre compte après connexion.</p>
  <div id="plansContainer"></div>
</section>

<!-- Dépôt -->
<section id="deposit" style="display:none;">
  <h2>Dépôt / Recharge</h2>
  <p>Vous pouvez recharger votre compte à tout moment. Entrez le montant que vous souhaitez déposer et cliquez sur "Recharger".</p>
  <form id="depositForm">
    <label>Montant à déposer</label>
    <input type="number" id="depositAmount" min="100" required>
    <button type="submit">Recharger</button>
  </form>
  <p>Solde actuel : <span id="currentBalance">0</span> FCFA</p>
</section>

<!-- Retrait -->
<section id="withdraw" style="display:none;">
  <h2>Retrait</h2>
  <p>Pour retirer vos gains, entrez le montant que vous souhaitez retirer. L’impôt de 5% sera appliqué automatiquement sur le montant retiré.</p>
  <form id="withdrawForm">
    <label>Montant à retirer</label>
    <input type="number" id="withdrawAmount" min="1000" required>
    <button type="submit">Retirer</button>
  </form>
  <p>Solde actuel : <span id="withdrawBalance">0</span> FCFA</p>
</section>

<!-- Historique -->
<section id="history" style="display:none;">
  <h2>Historique des opérations</h2>
  <p>Suivez toutes vos actions : dépôts, retraits et investissements.</p>
  <table>
    <thead>
      <tr>
        <th>Date</th>
        <th>Action</th>
        <th>Montant</th>
        <th>Plan / Type</th>
      </tr>
    </thead>
    <tbody id="historyTable">
      <tr><td colspan="4">Aucun historique pour l'instant.</td></tr>
    </tbody>
  </table>
</section>

<!-- Tableau de bord -->
<section id="dashboard" style="display:none;">
  <h2>Tableau de bord</h2>
  <p>Visualisez vos investissements et suivez vos gains.</p>
  <table>
    <thead>
      <tr>
        <th>Plan</th>
        <th>Montant investi</th>
        <th>Type / Durée</th>
        <th>Gain quotidien</th>
        <th>Gain total</th>
        <th>Retrait net</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="dashboardTable">
      <tr><td colspan="7">Aucun investissement pour l'instant.</td></tr>
    </tbody>
  </table>
</section>

<script>
// ======= Variables de base =======
const pages = ['home','plans','signup','login','dashboard','deposit','withdraw','history'];
let plansData = {
  2500: {term:'Long', days:60, daily:699},
  5000: {term:'Long', days:60, daily:1398},
  10000: {term:'Long', days:60, daily:2796},
  20000: {term:'Moyen', days:30, daily:5592},
  50000: {term:'Moyen', days:30, daily:13980},
  100000: {term:'Court', days:15, daily:27960},
  200000: {term:'Court', days:15, daily:55920},
  500000: {term:'Court', days:15, daily:139800},
  750000: {term:'Court', days:15, daily:209700},
  1000000: {term:'Court', days:15, daily:279600}
};
let users = JSON.parse(localStorage.getItem('users') || '[]');
let currentUser = JSON.parse(localStorage.getItem('currentUser') || 'null');

// ======= Navigation =======
function showPage(page){
  pages.forEach(p=>document.getElementById(p).style.display='none');
  document.getElementById(page).style.display='block';
  if(page==='dashboard') renderDashboard();
  if(page==='history') renderHistory();
  updateMenu();
}

// ======= Menu =======
function updateMenu(){
  document.getElementById('logoutBtn').style.display = currentUser ? 'inline-block' : 'none';
}

// ======= Plans =======
const plansContainer = document.getElementById('plansContainer');
const planSelectForm = document.getElementById('investmentPlanForm');
for(let key in plansData){
  const plan = plansData[key];
  plansContainer.innerHTML += `
  <div class="plan-card">
    <h3>${Number(key).toLocaleString()} FCFA – ${plan.term} terme (${plan.days}j)</h3>
    <p>Gain quotidien : ${plan.daily.toLocaleString()} FCFA</p>
    <p>Gain total : ${(plan.daily*plan.days).toLocaleString()} FCFA</p>
    <button onclick="selectPlan(${key})">Investir</button>
  </div>`;
  planSelectForm.innerHTML += `<option value="${key}">${Number(key).toLocaleString()} FCFA – ${plan.term} terme</option>`;
}
function selectPlan(value){
  showPage('signup');
  planSelectForm.value = value;
  updateGains();
}
function updateGains(){
  const value = planSelectForm.value;
  if(plansData[value]){
    const plan = plansData[value];
    document.getElementById('dailyGain').innerText = plan.daily.toLocaleString();
    document.getElementById('totalGain').innerText = (plan.daily*plan.days).toLocaleString();
  } else {
    document.getElementById('dailyGain').innerText='0';
    document.getElementById('totalGain').innerText='0';
  }
}
planSelectForm.addEventListener('change', updateGains);

// ======= Inscription =======
document.getElementById('investmentForm').addEventListener('submit', e=>{
  e.preventDefault();
  const firstName = document.getElementById('firstName').value;
  const lastName = document.getElementById('lastName').value;
  const email = document.getElementById('email').value;
  const password = document.getElementById('password').value;
  const planValue = planSelectForm.value;
  if(!planValue) return alert('Sélectionnez un plan');
  if(users.find(u=>u.email===email)) return alert('Cet email est déjà utilisé');

  const plan = plansData[planValue];
  const gainTotal = plan.daily * plan.days;
  const netWithdraw = gainTotal > 1000 ? Math.round(gainTotal*0.95) : 0;

  const user = {
    firstName, lastName, email, password,
    balance: 0,
    investments: [{
      date: new Date().toLocaleString(),
      planValue,
      term: plan.term,
      days: plan.days,
      daily: plan.daily,
      total: gainTotal,
      net: netWithdraw
    }],
    history: [{
      date: new Date().toLocaleString(),
      action: 'Investissement initial',
      amount: planValue,
      plan: plan.term
    }]
  };
  users.push(user);
  localStorage.setItem('users', JSON.stringify(users));
  currentUser = user;
  localStorage.setItem('currentUser', JSON.stringify(currentUser));
  alert('Compte créé et investi !');
  showPage('dashboard');
});

// ======= Connexion =======
document.getElementById('loginForm').addEventListener('submit', e=>{
  e.preventDefault();
  const email = document.getElementById('loginEmail').value;
  const password = document.getElementById('loginPassword').value;
  const user = users.find(u=>u.email===email && u.password===password);
  if(!user) return alert('Email ou mot de passe incorrect');
  currentUser = user;
  localStorage.setItem('currentUser', JSON.stringify(currentUser));
  alert('Connexion réussie !');
  showPage('dashboard');
});

// ======= Déconnexion =======
function logout(){
  currentUser = null;
  localStorage.setItem('currentUser', null);
  alert('Vous êtes déconnecté');
  showPage('login');
}

// ======= Tableau de bord =======
function renderDashboard(){
  if(!currentUser) return showPage('login');
  const tbody = document.getElementById('dashboardTable');
  if(currentUser.investments.length===0){
    tbody.innerHTML = '<tr><td colspan="7">Aucun investissement</td></tr>';
    return;
  }
  tbody.innerHTML='';
  currentUser.investments.forEach((inv,i)=>{
    tbody.innerHTML += `<tr>
      <td>${Number(inv.planValue).toLocaleString()}</td>
      <td>${Number(inv.planValue).toLocaleString()}</td>
      <td>${inv.term} / ${inv.days}j</td>
      <td>${Number(inv.daily).toLocaleString()}</td>
      <td>${Number(inv.total).toLocaleString()}</td>
      <td>${Number(inv.net).toLocaleString()}</td>
      <td><button onclick="removeInvestment(${i})">Supprimer</button></td>
    </tr>`;
  });
}

// ======= Supprimer investissement =======
function removeInvestment(index){
  const invAmount = currentUser.investments[index].planValue;
  const invPlan = currentUser.investments[index].term;
  currentUser.investments.splice(index,1);
  currentUser.history.push({
    date: new Date().toLocaleString(),
    action: 'Investissement supprimé',
    amount: invAmount,
    plan: invPlan
  });
  updateUserData();
}

// ======= Dépôt =======
document.getElementById('depositForm').addEventListener('submit', e=>{
  e.preventDefault();
  const amount = Number(document.getElementById('depositAmount').value);
  if(amount<=0) return alert('Montant invalide');
  currentUser.balance += amount;
  currentUser.history.push({
    date: new Date().toLocaleString(),
    action: 'Dépôt',
    amount: amount,
    plan: ''
  });
  updateUserData();
  alert('Dépôt réussi !');
});

// ======= Retrait =======
document.getElementById('withdrawForm').addEventListener('submit', e=>{
  e.preventDefault();
  const amount = Number(document.getElementById('withdrawAmount').value);
  if(amount<=0 || amount>currentUser.balance) return alert('Montant invalide ou solde insuffisant');
  const net = Math.round(amount*0.95);
  currentUser.balance -= amount;
  currentUser.history.push({
    date: new Date().toLocaleString(),
    action: 'Retrait',
    amount: amount,
    plan: `Net reçu : ${net}`
  });
  updateUserData();
  alert(`Retrait effectué ! Net reçu : ${net} FCFA`);
});

// ======= Historique =======
function renderHistory(){
  if(!currentUser) return showPage('login');
  const tbody = document.getElementById('historyTable');
  if(currentUser.history.length===0){
    tbody.innerHTML = '<tr><td colspan="4">Aucun historique</td></tr>';
    return;
  }
  tbody.innerHTML='';
  currentUser.history.forEach(h=>{
    tbody.innerHTML += `<tr>
      <td>${h.date}</td>
      <td>${h.action}</td>
      <td>${Number(h.amount).toLocaleString()}</td>
      <td>${h.plan}</td>
    </tr>`;
  });
}

// ======= Mise à jour utilisateur =======
function updateUserData(){
  const index = users.findIndex(u=>u.email===currentUser.email);
  if(index>-1) users[index]=currentUser;
  localStorage.setItem('users', JSON.stringify(users));
  localStorage.setItem('currentUser', JSON.stringify(currentUser));
  renderDashboard();
  renderHistory();
  document.getElementById('currentBalance').innerText = currentUser.balance.toLocaleString();
  document.getElementById('withdrawBalance').innerText = currentUser.balance.toLocaleString();
}

// ======= Initialisation =======
showPage('home');
</script>

</body>
</html>
function selectPlan(planValue){
  if(!currentUser){
    alert('Veuillez vous connecter pour investir.');
    showPage('login');
    return;
  }
  const plan = plansData[planValue];
  if(currentUser.balance < planValue){
    alert('Votre solde est insuffisant pour investir dans ce plan. Veuillez faire un dépôt.');
    return;
  }
  
  // Débiter le solde et ajouter l’investissement
  currentUser.balance -= planValue;
  const gainTotal = plan.daily * plan.days;
  const netWithdraw = gainTotal > 1000 ? Math.round(gainTotal*0.95) : 0;

  currentUser.investments.push({
    date: new Date().toLocaleString(),
    planValue: planValue,
    term: plan.term,
    days: plan.days,
    daily: plan.daily,
    total: gainTotal,
    net: netWithdraw
  });

  currentUser.history.push({
    date: new Date().toLocaleString(),
    action: 'Investissement',
    amount: planValue,
    plan: plan.term
  });

  updateUserData();
  alert(`Investissement réussi ! Votre solde restant : ${currentUser.balance.toLocaleString()} FCFA`);
  renderDashboard();
}
